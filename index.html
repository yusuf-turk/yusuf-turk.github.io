<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Denizli Tamgaları - 3D Atlas</title>
    
    <link href="https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Lato:wght@300;400;700&display=swap" rel="stylesheet">
    
    <style>
        /* --- 1. GENEL SAYFA TASARIMI --- */
        body {
            font-family: 'Lato', sans-serif;
            margin: 0;
            padding: 0;
            background-color: #0f1012;
            color: #d1d5db;
            height: 100vh;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        header {
            background: linear-gradient(to right, #1a1b1e, #25262b);
            color: #c89b3c;
            text-align: center;
            padding: 20px;
            flex-shrink: 0;
            border-bottom: 4px solid #c89b3c; 
            box-shadow: 0 4px 15px rgba(0,0,0,0.6);
            z-index: 1000;
            position: relative;
        }
        
        header h2 { 
            margin: 0; 
            font-family: 'Cinzel', serif;
            font-size: 1.8rem;
            letter-spacing: 2px; 
            text-transform: uppercase; 
            text-shadow: 2px 2px 4px rgba(0,0,0,0.8);
        }

        .main-container {
            display: flex;
            flex: 1;
            overflow: hidden;
            position: relative;
        }

        #map {
            flex: 3;
            height: 100%;
            background-color: #000;
            z-index: 1;
        }

        /* --- SIDEBAR --- */
        #sidebar {
            flex: 1.3;
            background-color: #16171a;
            padding: 0;
            overflow-y: auto;
            border-left: 1px solid #2a2b2e;
            box-shadow: -10px 0 30px rgba(0,0,0,0.8);
            z-index: 2;
        }

        #sidebar-content {
            padding: 25px;
            padding-bottom: 100px;
        }

        #sidebar::-webkit-scrollbar { width: 8px; }
        #sidebar::-webkit-scrollbar-track { background: #16171a; }
        #sidebar::-webkit-scrollbar-thumb { background: #333; border-radius: 4px; border: 2px solid #16171a; }
        #sidebar::-webkit-scrollbar-thumb:hover { background: #c89b3c; }

        /* --- KART TASARIMI --- */
        .location-header {
            color: #e5e7eb;
            font-family: 'Cinzel', serif;
            border-bottom: 1px solid #333;
            padding-bottom: 20px;
            margin-bottom: 30px;
            font-size: 1.8rem;
            text-align: center;
            letter-spacing: 1px;
            background: radial-gradient(circle at center, #25262b 0%, transparent 70%);
            padding-top: 10px;
        }

        .tamga-card {
            background-color: #1e1f23;
            border: 1px solid #2a2b2e;
            border-radius: 8px;
            margin-bottom: 35px;
            overflow: hidden;
            box-shadow: 0 4px 6px rgba(0,0,0,0.3);
            transition: all 0.3s ease;
        }
        .tamga-card:hover {
            border-color: #c89b3c;
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.5);
        }

        .card-header {
            background-color: #25262b;
            padding: 15px 20px;
            border-bottom: 1px solid #2a2b2e;
            display: flex;
            align-items: center;
        }

        .card-number {
            font-family: 'Cinzel', serif;
            font-size: 1.3rem;
            color: #c89b3c;
            font-weight: bold;
            opacity: 0.9;
            min-width: fit-content;
            white-space: nowrap;
            border-right: 1px solid #444; 
            padding-right: 15px; 
            margin-right: 15px; 
        }

        .tamga-title { color: #fff; margin: 0; font-size: 1.1rem; font-weight: 700; line-height: 1.4; }
        .tamga-img { width: 100%; height: auto; display: block; border-bottom: 1px solid #2a2b2e; filter: brightness(0.9); transition: filter 0.3s; }
        .tamga-card:hover .tamga-img { filter: brightness(1.1); }
        .card-details { padding: 20px; }
        .detail-row { margin-bottom: 15px; font-size: 0.95rem; line-height: 1.6; border-left: 2px solid #333; padding-left: 15px; }
        .detail-row:last-child { margin-bottom: 0; border-left: 2px solid #c89b3c; }
        .label { color: #9ca3af; font-size: 0.75rem; font-weight: 700; display: block; margin-bottom: 4px; text-transform: uppercase; letter-spacing: 1px; }
        .value { color: #e5e7eb; font-weight: 400; }
        .value.desc { color: #d1d5db; font-style: italic; }

        /* Marker Tasarımı (CSS ile yapılıyor) */
        .custom-marker {
            background-image: url('https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-orange.png');
            background-size: cover;
            width: 30px;
            height: 50px;
            cursor: pointer;
            filter: drop-shadow(0 0 5px #c89b3c); /* Bakır ışıltısı */
        }

        @media (max-width: 768px) {
            .main-container { flex-direction: column; }
            #map { flex: 1; height: 50vh; }
            #sidebar { flex: 1; height: 50vh; }
        }
    </style>
    
    <script src="https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.js"></script>
</head>
<body>

    <header>
        <h2>Denizli Tamga Atlası</h2>
    </header>

    <div class="main-container">
        <div id="map"></div>
        <div id="sidebar">
            <div id="sidebar-content">
                <div style="text-align:center; margin-top:40%; color:#555;">
                    <svg width="80" height="80" viewBox="0 0 24 24" fill="none" stroke="#c89b3c" stroke-width="0.8" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"></path><path d="M2 12h20"></path></svg>
                    <p style="font-family:'Cinzel', serif; margin-top:20px; font-size:1.1rem; color:#888;">Keşfetmek için haritadan<br>bir bölge seçiniz</p>
                </div>
            </div>
        </div>
    </div>

    <script>
    // -------------------------------------------------------------------------
    // ÖNEMLİ: BURAYA KENDİ MAPBOX TOKEN'INI YAPIŞTIRMALISIN
    // -------------------------------------------------------------------------
    mapboxgl.accessToken = 'pk.eyJ1IjoieXVzdWZ0dXJrIiwiYSI6ImNtaXc0eXU0ZzB2eWczZ3M4ZHAwdDY3MXQifQ.ZGuW9mBmkCpZilFZvNmPzA'; 
    // -------------------------------------------------------------------------

    // --- 1. 3D HARİTA BAŞLATMA ---
    const map = new mapboxgl.Map({
        container: 'map',
        // 'satellite-streets-v12' stilini kullanarak uydu + yolları gösteriyoruz
        style: 'mapbox://styles/mapbox/satellite-streets-v12', 
        center: [29.0864, 37.7765], // Denizli Merkez [Boylam, Enlem]
        zoom: 8.5,
        pitch: 60, // 3D Eğim (0-85 arası)
        bearing: -10, // Haritayı hafif döndür
        projection: 'globe' // Dünya yuvarlaklığı
    });

    // Harita yüklenince dağları yükselt (Terrain)
    map.on('style.load', () => {
        map.setFog({
            'range': [1, 10],
            'color': '#0f1012', // Arka planla uyumlu sis
            'high-color': '#1a1b1e',
            'horizon-blend': 0.1
        });

        // 3D Arazi Kaynağını Ekle
        map.addSource('mapbox-dem', {
            'type': 'raster-dem',
            'url': 'mapbox://mapbox.mapbox-terrain-dem-v1',
            'tileSize': 512,
            'maxzoom': 14
        });
        
        // Dağları yükselt (Exaggeration: 1.5 kat daha yüksek gösterir, dramatik durur)
        map.setTerrain({ 'source': 'mapbox-dem', 'exaggeration': 1.5 });
    });

    // Navigasyon Kontrolleri (Sağ Alt)
    map.addControl(new mapboxgl.NavigationControl(), 'bottom-right');


    // --- 2. VERİTABANI (AYNI İÇERİK) ---
    var locationData = {
        "tavas": {
            mainTitle: "Kale-i Tavas",
            yerText: "Kale-i Tavas Yukarı Mezarlığı Mezar Taşları",
            koleksiyon: [
                { numara: "T-01", baslik: "Kuyistan Tamgası", donem: "12. ve 13. Yüzyıl", resim: "images/tavas1.png", aciklama: "Sonradan Türkleşen bir Moğol kabilesine ait ve Konurat boyunun tamgası olduğu düşünülmektedir." },
                { numara: "T-02", baslik: "Hun ve Avar Benzerliği", donem: "11 ve 13. Yüzyıl", resim: "images/tavas2.png", aciklama: "Orta Asya’dan Anadolu'ya gelen boyların zamanla alt boylara ayrılıp kendi işaretlerini aldıkları düşünülmektedir." },
                // ... (Diğer veriler buraya gelecek, önceki kodun aynısı) ...
                { numara: "T-24", baslik: "Sepruş(Dilimli başlık)", donem: "11 ve 13. Yüzyıl", resim: "images/tavas24.png", aciklama: "Başlık genellikle ölen kişinin inancını, tarikatını ve bazen de sosyal statüsünü gösterir." }
            ]
        },
        // ... (Diğer veriler için yer tutucu, önceki uzun verileri buraya yapıştırmalısın) ...
    };
    
    // NOT: Veri çok uzun olduğu için yukarıda kısalttım. Önceki kodundaki 'var locationData = ...' 
    // kısmını buraya aynen kopyalayabilirsin. Yapı birebir aynıdır.


    // --- 3. LOKASYONLAR (Mapbox Formatı: [Boylam, Enlem]) ---
    // DİKKAT: Leaflet'in tam tersidir (Longitude, Latitude)
    var locations = [
        { id: "tavas", name: "Kale-i Tavas Yukarı Mezarlığı ", coords: [37.4363, 28.8518] },
        { id: "cardak", name: "Çardak Han Kervansarayı", coords: [37.8284, 29.6660] },
        { id: "muze", name: "Denizli Kent Müzesi", coords: [37.7819, 29.0851] },
        { id: "civril", name: "Çivril Özdemirci Mezarlığı", coords: [38.0369, 29.7505] }
    ];


    // --- 4. MARKERLARI EKLEME ---
    locations.forEach(function(loc) {
        // Özel HTML Elementi Oluştur (Marker için)
        const el = document.createElement('div');
        el.className = 'custom-marker';

        // Marker'ı Haritaya Ekle
        new mapboxgl.Marker(el)
            .setLngLat(loc.coords)
            .addTo(map);

        // Tıklama Olayı (Element üzerine listener ekliyoruz)
        el.addEventListener('click', () => {
            // 3D Uçuş Animasyonu
            map.flyTo({
                center: loc.coords,
                zoom: 16,        // Çok yakın zoom
                pitch: 70,       // Kamerayı iyice yatır (Dağlar görünsün)
                bearing: 40,     // Hafif yan açıdan bak
                speed: 0.8,      // Yavaşça süzül
                curve: 1.5       // Yumuşak kavis
            });

            // Yan Paneli Doldur (Önceki mantığın aynısı)
            // Not: Bu kısım locationData tam doluysa çalışır.
            if(locationData[loc.id]) {
                var data = locationData[loc.id];
                var sidebar = document.getElementById('sidebar'); 
                var sidebarContent = document.getElementById('sidebar-content');
                
                var htmlContent = `<h2 class="location-header">${data.mainTitle}</h2>`;

                data.koleksiyon.forEach(function(item) {
                    htmlContent += `
                        <div class="tamga-card">
                            <div class="card-header">
                                <span class="card-number">${item.numara}</span>
                                <h3 class="tamga-title">${item.baslik}</h3>
                            </div>
                            <img src="${item.resim}" class="tamga-img" alt="${item.baslik}">
                            <div class="card-details">
                                <div class="detail-row">
                                    <span class="label">TAHMİNİ ZAMAN</span>
                                    <span class="value">${item.donem || "Belirtilmemiş"}</span>
                                </div>
                                <div class="detail-row">
                                    <span class="label">YER</span>
                                    <span class="value">${data.yerText}</span>
                                </div>
                                <div class="detail-row">
                                    <span class="label">AÇIKLAMA</span>
                                    <span class="value desc">${item.aciklama}</span>
                                </div>
                            </div>
                        </div>
                    `;
                });

                sidebarContent.innerHTML = htmlContent;
                sidebar.scrollTop = 0;
            }
        });
    });

    </script>
</body>
</html>
