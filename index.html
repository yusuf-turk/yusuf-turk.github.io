<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Denizli Tamgaları Yoğunluk Haritası</title>
    
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f4f4f4; /* Arka plan açık gri oldu */
            color: #333; /* Yazılar koyu renk oldu */
        }

        header {
            background-color: #2c3e50; /* Başlık rengi lacivert */
            color: white;
            text-align: center;
            padding: 1rem;
            border-bottom: 4px solid #34495e;
        }

        /* HARİTA KUTUSU AYARLARI */
        #map {
            height: 600px;
            width: 80%;
            margin: 30px auto;
            border: 5px solid #fff; /* Çerçeve beyaz */
            border-radius: 10px;
            box-shadow: 0 0 15px rgba(0,0,0,0.2); /* Gölgeyi hafiflettik */
            background-color: #ddd; 
        }

        /* Mobilde harita sığsın diye */
        @media (max-width: 768px) {
            #map {
                width: 95%;
                height: 400px;
            }
        }
    </style>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="https://unpkg.com/leaflet.heat/dist/leaflet-heat.js"></script>
</head>
<body>

    <header>
        <h1>Denizli Tamga Yoğunluk Haritası</h1>
        <p>Lokasyonları incelemek için haritadaki işaretlere tıklayınız.</p>
    </header>

    <div id="map"></div>
    
    <script>
    // --- HARİTA AYARLARI ---

    var guneyBati = L.latLng(37.000, 28.300);
    var kuzeyDogu = L.latLng(38.500, 30.100);
    var denizliSinirlari = L.latLngBounds(guneyBati, kuzeyDogu);

    var map = L.map('map', {
        center: [37.7765, 29.0864], 
        zoom: 9,
        minZoom: 8,
        maxBounds: denizliSinirlari,
        maxBoundsViscosity: 1.0
    });

    // DEĞİŞİKLİK BURADA: Standart OpenStreetMap katmanına geçtik
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: '&copy; OpenStreetMap contributors',
        maxZoom: 19
    }).addTo(map);


    // --- VERİ VE HEATMAP ---

    var mainLocations = [
        { name: "Kale-i Tavas Mezarlığı", coords: [37.568, 29.070], link: "pages/kale-i-tavas.html" },
        { name: "Çardak Han Kervansarayı", coords: [37.825, 29.660], link: "pages/cardak-han.html" },
        { name: "Denizli Kent Müzesi", coords: [37.774, 29.087], link: "pages/denizli-muze.html" },
        { name: "Çivril Özdemirci Mezarlığı", coords: [38.295, 29.730], link: "pages/civril-ozdemirci.html" }
    ];

    // Heatmap Verisi Oluşturma (Simülasyon)
    var heatDataPoints = [];
    mainLocations.forEach(function(loc) {
        heatDataPoints.push([loc.coords[0], loc.coords[1], 1.0]); 
        for (let i = 0; i < 50; i++) {
            var randomLat = loc.coords[0] + (Math.random() - 0.5) / 20; 
            var randomLng = loc.coords[1] + (Math.random() - 0.5) / 20;
            heatDataPoints.push([randomLat, randomLng, 0.5]);
        }
    });

    // Heatmap Katmanını Ekle
    var heat = L.heatLayer(heatDataPoints, {
        radius: 25,
        blur: 20,
        maxZoom: 10,
        gradient: { 0.4: 'blue', 0.65: 'lime', 1: 'red' } // Renkleri açık harita için biraz daha belirgin yaptım
    }).addTo(map);


    // İşaretçileri Ekle
    mainLocations.forEach(function(loc) {
        var marker = L.marker(loc.coords).addTo(map);
        marker.bindPopup(`
            <div style="text-align:center; font-size:14px;">
                <b>${loc.name}</b><br><br>
                <a href="${loc.link}" style="background-color:#2980b9; color:white; padding:6px 12px; text-decoration:none; border-radius:4px;">İncele</a>
            </div>
        `);
    });

    </script>
</body>
</html>
