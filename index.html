<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Denizli Tamgaları - Tarihsel Atlas</title>
    
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    
    <style>
        /* --- 1. GENEL SAYFA TASARIMI --- */
        body {
            font-family: 'Segoe UI', 'Helvetica Neue', sans-serif;
            margin: 0;
            padding: 0;
            background-color: #121212; /* Daha derin siyah */
            color: #e0e0e0;
            height: 100vh;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        /* Header Tasarımı: Altın Sarısı Detaylar */
        header {
            background-color: #1a1a1a;
            color: #d4af37; /* Tarihi Altın Rengi */
            text-align: center;
            padding: 15px;
            flex-shrink: 0;
            border-bottom: 3px solid #d4af37; 
            box-shadow: 0 2px 10px rgba(0,0,0,0.5);
            z-index: 1000;
        }
        
        header h2 { margin: 0; font-weight: 300; letter-spacing: 1px; text-transform: uppercase; }
        header p { margin: 5px 0 0; color: #888; font-size: 0.85rem; }

        .main-container {
            display: flex;
            flex: 1;
            overflow: hidden;
            position: relative;
        }

        #map {
            flex: 3;
            height: 100%;
            background-color: #000;
            z-index: 1;
        }

        /* --- 2. SIDEBAR (YAN PANEL) TASARIMI --- */
        #sidebar {
            flex: 1;
            background-color: #1e1e1e; /* Panel rengi */
            padding: 20px;
            overflow-y: auto;
            box-sizing: border-box;
            border-left: 1px solid #333;
            box-shadow: -5px 0 20px rgba(0,0,0,0.7);
            z-index: 2;
        }

        #sidebar-content {
            padding-bottom: 80px;
        }

        /* Scrollbar (Kaydırma Çubuğu) Özelleştirme */
        #sidebar::-webkit-scrollbar { width: 6px; }
        #sidebar::-webkit-scrollbar-track { background: #1e1e1e; }
        #sidebar::-webkit-scrollbar-thumb { background: #444; border-radius: 3px; }
        #sidebar::-webkit-scrollbar-thumb:hover { background: #d4af37; }


        /* --- 3. KART TASARIMI (YENİLENDİ) --- */
        .location-header {
            color: #d4af37; /* Altın Başlık */
            border-bottom: 1px solid #444;
            padding-bottom: 15px;
            margin-bottom: 25px;
            font-size: 1.6rem;
            font-weight: 300;
            text-align: center;
        }

        .tamga-card {
            background-color: #252525; /* Kart zemini */
            border: 1px solid #333;
            border-radius: 4px; /* Keskin köşeler yerine hafif yumuşak */
            padding: 0; /* İç boşluğu kaldırdık, resmi tam oturtacağız */
            margin-bottom: 30px;
            overflow: hidden;
            transition: transform 0.2s;
        }
        .tamga-card:hover {
            border-color: #555;
            transform: translateY(-2px);
        }

        .tamga-title {
            color: #fff;
            background-color: #2c2c2c;
            margin: 0;
            padding: 12px 15px;
            font-size: 1.1rem;
            font-weight: 600;
            border-left: 4px solid #d4af37; /* Sol kenar altın çizgi */
        }

        .tamga-img {
            width: 100%;
            height: auto;
            display: block; /* Alt boşluğu engellemek için */
            border-bottom: 1px solid #333;
        }

        /* Bilgi Alanı (Resmin altı) */
        .card-details {
            padding: 15px;
        }

        .detail-row {
            margin-bottom: 10px;
            font-size: 0.95rem;
            line-height: 1.5;
            border-bottom: 1px dashed #333; /* Satırlar arası ince çizgi */
            padding-bottom: 8px;
        }
        .detail-row:last-child {
            border-bottom: none;
            margin-bottom: 0;
        }

        .label {
            color: #d4af37; /* Etiket rengi altın */
            font-weight: bold;
            display: block; /* Alt alta dursunlar diye */
            margin-bottom: 3px;
            font-size: 0.85rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .value {
            color: #ccc;
        }

        /* Harita üzerindeki etiketler */
        .map-label {
            background: rgba(0,0,0,0.5);
            border: 1px solid #d4af37;
            border-radius: 4px;
            color: #fff;
            font-weight: bold;
            font-size: 12px;
            padding: 2px 5px;
            margin-top: -10px;
        }

        @media (max-width: 768px) {
            .main-container { flex-direction: column; }
            #map { flex: 1; height: 50vh; }
            #sidebar { flex: 1; height: 50vh; }
        }
    </style>
    
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="https://unpkg.com/leaflet.heat/dist/leaflet-heat.js"></script>
</head>
<body>

    <header>
        <h2>Denizli Tamga Atlası</h2>
        <p>Anadolu'nun Türkleşme Sürecindeki İzler</p>
    </header>

    <div class="main-container">
        <div id="map"></div>
        <div id="sidebar">
            <div id="sidebar-content">
                <div style="text-align:center; margin-top:50%; color:#555;">
                    <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="#d4af37" stroke-width="1" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="12"></line><line x1="12" y1="16" x2="12.01" y2="16"></line></svg>
                    <p>Detayları görüntülemek için<br>haritadaki bir lokasyona tıklayınız.</p>
                </div>
            </div>
        </div>
    </div>

    <script>
    // --- 1. HARİTA AYARLARI ---
    var map = L.map('map', {
        center: [37.7765, 29.0864],
        zoom: 9, 
        zoomControl: false,
        attributionControl: false
    });
    L.control.zoom({ position: 'bottomright' }).addTo(map);

    L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', { maxZoom: 18 }).addTo(map);

    // --- 2. DENİZLİ SINIRLARI ---
    fetch('https://raw.githubusercontent.com/cihadturhan/tr-geojson/master/geo/tr-cities-utf8.json')
        .then(res => res.json())
        .then(data => {
            var denizliFeature = data.features.find(f => f.properties.name === 'Denizli');
            if (denizliFeature) {
                // Sınır Çizgisi: Artık Altın Sarısı
                L.geoJSON(denizliFeature, { style: { color: '#d4af37', weight: 2, opacity: 0.8, fillOpacity: 0 } }).addTo(map);
                
                // Maskeleme
                var worldPolygon = [[90, -180], [90, 180], [-90, 180], [-90, -180]];
                var denizliCoords = [];
                var geometry = denizliFeature.geometry;
                if (geometry.type === 'Polygon') denizliCoords = geometry.coordinates[0].map(c => [c[1], c[0]]);
                else if (geometry.type === 'MultiPolygon') denizliCoords = geometry.coordinates[0][0].map(c => [c[1], c[0]]);

                L.polygon([worldPolygon, denizliCoords], { color: 'transparent', fillColor: '#121212', fillOpacity: 1 }).addTo(map);
            }
        });


    // --- 3. VERİTABANI ---
    // Her ana bölgeye "yerText" adında sabit bir yer bilgisi ekledim.
    var locationData = {
        "tavas": {
            mainTitle: "Kale-i Tavas",
            yerText: "Kale-i Tavas Yukarı Mezarlığı Mezar Taşları",
            koleksiyon: [
                { baslik: "Kuyistan Tamgası", donem: "12. ve 13. Yüzyıl", resim: "../images/tavas1.png", aciklama: "Sonradan Türkleşen bir Moğol kabilesine ait ve Konurat boyunun tamgası olduğu düşünülmektedir." },
                { baslik: "Hun ve Avar Benzerliği", donem: "11 ve 13. Yüzyıl", resim: "../images/tavas2.png", aciklama: "Orta Asya’dan Anadolu'ya gelen boyların zamanla alt boylara ayrılıp kendi işaretlerini aldıkları düşünülmektedir." },
                { baslik: "Hazar Türkleri Tamgası", donem: "11 ve 12. Yüzyıl", resim: "../images/tavas3.png", aciklama: "Bir boya ait kimlik, aidiyet ya da mülkiyet işareti olarak değerlendirilmektedir." },
                { baslik: "Hayat Ağacı Figürü", donem: "11 ve 13. Yüzyıl", resim: "../images/tavas4.png", aciklama: "Şamanizm inancına sahip olanların bu figürü gökyüzüne ulaşmak için bir merdiven olarak kullandıklarına inanılmaktadır." },
                { baslik: "Hayat Ağacı Varyasyonu", donem: "11 ve 13. Yüzyıl", resim: "../images/tavas5.png", aciklama: "Şamanizm inancına sahip olanların bu figürü gökyüzüne ulaşmak için bir merdiven olarak kullandıklarına inanılmaktadır." },
                { baslik: "Peçenek Alt Boy Tamgası", donem: "11 ve 13. Yüzyıl", resim: "../images/tavas6.png", aciklama: "Bir boya ait kimlik, aidiyet ya da mülkiyet işareti olarak değerlendirilmektedir." },
                { baslik: "Hazar Türkleri Tamgası", donem: "9 ve 12. Yüzyıl", resim: "../images/tavas7.png", aciklama: "Bir boya ait kimlik, aidiyet ya da mülkiyet işareti olarak değerlendirilmektedir." },
                { baslik: "Tatar Türkleri Tamgası", donem: "11 ve 12. Yüzyıl", resim: "../images/tavas8.png", aciklama: "Bir boya ait kimlik, aidiyet ya da mülkiyet işareti olarak değerlendirilmektedir." },
                { baslik: "Belirsiz Boy Tamgası", donem: "11 ve 12. Yüzyıl", resim: "../images/tavas9.png", aciklama: "Bir boya ait kimlik, aidiyet ya da mülkiyet işareti olarak değerlendirilmektedir." },
                { baslik: "Avşar Boyu Tamgası", donem: "11 ve 13. Yüzyıl", resim: "../images/tavas10.png", aciklama: "Uğur getiren veya avcı anlamlarına geldiği düşünülmektedir." },
                { baslik: "Kınık Boyu Tamgası", donem: "10 ve 11. Yüzyıl", resim: "../images/tavas11.png", aciklama: "Bir boya ait kimlik, aidiyet ya da mülkiyet işareti olarak değerlendirilmektedir." },
                { baslik: "Hayat Ağacı Figürü", donem: "11 ve 13. Yüzyıl", resim: "../images/tavas12.png", aciklama: "Şamanizm inancına sahip olanların bu figürü gökyüzüne ulaşmak için bir merdiven olarak kullandıklarına inanılmaktadır." },
                { baslik: "Kınık Boyu Tamgası", donem: "11 ve 13. Yüzyıl", resim: "../images/tavas13.png", aciklama: "Bir boya ait kimlik, aidiyet ya da mülkiyet işareti olarak değerlendirilmektedir." },
                { baslik: "Afşar/Çepni Tamgası", donem: "11 ve 13. Yüzyıl", resim: "../images/tavas14.png", aciklama: "Bir boya ait kimlik, aidiyet ya da mülkiyet işareti olarak değerlendirilmektedir." },
                { baslik: "Kızık Boyu Tamgası", donem: "11 ve 13. Yüzyıl", resim: "../images/tavas15.png", aciklama: "Bir boya ait kimlik, aidiyet ya da mülkiyet işareti olarak değerlendirilmektedir." },
                { baslik: "Çepni/İğdir Alt Boy", donem: "11 ve 15. Yüzyıl", resim: "../images/tavas16.png", aciklama: "Gökyüzü ile yeryüzünü bağladığına inanılmaktadır." },
                { baslik: "Geometrik Tamga (Daire)", donem: "11 ve 13. Yüzyıl", resim: "../images/tavas17.png", aciklama: "Orta Asya’dan beri Türklerde geometrik şekillerin çeşitli sembol ve tamga işareti olarak kullanıldığı bilinmektedir." },
                { baslik: "Geometrik Tamga (Varyasyon)", donem: "11 ve 13. Yüzyıl", resim: "../images/tavas18.png", aciklama: "Orta Asya’dan beri Türklerde geometrik şekillerin çeşitli sembol ve tamga işareti olarak kullanıldığı bilinmektedir." },
                { baslik: "Çepni/İğdir Tamgası", donem: "11 ve 15. Yüzyıl", resim: "../images/tavas19.png", aciklama: "Gökyüzünü simgelediği düşünülmektedir." },
                { baslik: "Geometrik Tamga (Eşkenar)", donem: "11 ve 13. Yüzyıl", resim: "../images/tavas20.png", aciklama: "Orta Asya’dan beri Türklerde geometrik şekillerin çeşitli sembol ve tamga işareti olarak kullanıldığı bilinmektedir." },
                { baslik: "Kayı Boyu Tamgası", donem: "11 ve 13. Yüzyıl", resim: "../images/tavas21.png", aciklama: "Bir boya ait kimlik, aidiyet ya da mülkiyet işareti olarak değerlendirilmektedir." },
                { baslik: "Kayı Boyu Tamgası 2", donem: "11 ve 13. Yüzyıl", resim: "../images/tavas22.png", aciklama: "Bir boya ait kimlik, aidiyet ya da mülkiyet işareti olarak değerlendirilmektedir." },
                { baslik: "Yıva Türkleri Tamgası", donem: "11 ve 13. Yüzyıl", resim: "../images/tavas23.png", aciklama: "Bir boya ait kimlik, aidiyet ya da mülkiyet işareti olarak değerlendirilmektedir." },
                { baslik: "Sepruş (Dilimli Başlık)", donem: "11 ve 13. Yüzyıl", resim: "../images/tavas24.png", aciklama: "Başlık genellikle ölen kişinin inancını, tarikatını ve bazen de sosyal statüsünü gösterir." }
            ]
        },
        "cardak": {
            mainTitle: "Çardak Han",
            yerText: "Çardak Han Kervansarayı(Bina içi duvarı)",
            koleksiyon: [
                { baslik: "Usta İşareti / Boy Tamgası", donem: "11 ve 13. Yüzyıl", resim: "../images/cardak1.png", aciklama: "Binanın inşasında çalışan ustanın kimlik işareti." },
                { baslik: "Boy Tamgası", donem: "11 ve 13. Yüzyıl", resim: "../images/cardak2.png", aciklama: "Bir boya mensup aitlik işareti." },
                { baslik: "Dodurga Boy Tamgası", donem: "11 ve 13. Yüzyıl", resim: "../images/cardak3.png", aciklama: "Bir boya mensup aitlik işareti." },
                { baslik: "Sekiz Köşeli Yıldız", donem: "11 ve 13. Yüzyıl", resim: "../images/cardak4.png", aciklama: "Merhamet, şefkat ve doğruluğu simgeleyen Selçuklu yıldızı." },
                { baslik: "Kırgız Tamgası", donem: "11 ve 13. Yüzyıl", resim: "../images/cardak5.png", aciklama: "Bir boya ait kimlik, aidiyet işareti." },
                { baslik: "Usta İşareti 2", donem: "11 ve 13. Yüzyıl", resim: "../images/cardak6.png", aciklama: "Binanın inşasında çalışan ustanın kimlik işareti." },
                { baslik: "İğdir Boyu Tamgası", donem: "11 ve 13. Yüzyıl", resim: "../images/cardak7.png", aciklama: "Çardak Han'da en sık rastlanılan işarettir." },
                { baslik: "Karşılıklı İki Balık", donem: "11 ve 13. Yüzyıl", resim: "../images/cardak8.png", aciklama: "Bolluk, bereket ve yeniden yaratılışı ifade eder." },
                { baslik: "Boğa Figürü", donem: "11 ve 13. Yüzyıl", resim: "../images/cardak9.png", aciklama: "Güç, yiğitlik ve bereketi simgeler." }
            ]
        },
        "muze": {
            mainTitle: "Kent Müzesi",
            yerText: "Denizli Kent Müzesi",
            koleksiyon: [
                { baslik: "Saç Örgülü Tamgalı Taş", donem: "11 ve 13. Yüzyıl", resim: "../images/müze1.png", aciklama: "Ölümden sonraki yaşama ve ölümsüz olma isteğiyle ilişkilendirilir." },
                { baslik: "Tamgalı Taş", donem: "13 ve 15. Yüzyıl", resim: "../images/müze2.png", aciklama: "Taş üzerindeki figürler tam anlaşılamamıştır." },
                { baslik: "Ok-Yay Tamgası", donem: "13 ve 15. Yüzyıl", resim: "../images/müze3.png", aciklama: "Yay hükümdarlığı, Ok ise hakana bağlılığı temsil eder." }
            ]
        },
        "civril": {
            mainTitle: "Çivril Özdemirci Mz.",
            yerText: "Çivril Özdemirci Mezarlığı Mezar Taşları",
            koleksiyon: [
                { baslik: "Hun/Avar Alt Boy Tamgası", donem: "11 ve 13. Yüzyıl", resim: "../images/civril1.png", aciklama: "Bir boya ait kimlik, aidiyet ya da mülkiyet işareti." },
                { baslik: "Salgur (Salur) Tamgası", donem: "11 ve 13. Yüzyıl", resim: "../images/civril2.png", aciklama: "Bir boya ait kimlik, aidiyet ya da mülkiyet işareti." },
                { baslik: "Salgur Varyasyonu", donem: "11 ve 13. Yüzyıl", resim: "../images/civril3.png", aciklama: "Bir boya ait kimlik, aidiyet ya da mülkiyet işareti." }
            ]
        }
    };

    var locations = [
        { id: "tavas", name: "Kale-i Tavas", coords: [37.568, 29.070] },
        { id: "cardak", name: "Çardak Han", coords: [37.825, 29.660] },
        { id: "muze", name: "Kent Müzesi", coords: [37.774, 29.087] },
        { id: "civril", name: "Özdemirci Mz.", coords: [38.295, 29.730] }
    ];

    // --- 4. RENDER VE İKONLAR ---
    
    // Altın Rengi Marker İkonu (Tasarıma uysun diye)
    var goldIcon = new L.Icon({
        iconUrl: 'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-gold.png',
        shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png',
        iconSize: [25, 41],
        iconAnchor: [12, 41],
        popupAnchor: [1, -34],
        shadowSize: [41, 41]
    });

    locations.forEach(function(loc) {
        var marker = L.marker(loc.coords, {icon: goldIcon}).addTo(map);
        marker.bindTooltip(loc.name, { permanent: true, direction: 'top', className: 'map-label', offset: [0, -35] });
        
        marker.on('click', function() {
            map.flyTo(loc.coords, 15, { animate: true, duration: 1.5 });

            var data = locationData[loc.id];
            var sidebar = document.getElementById('sidebar'); 
            var sidebarContent = document.getElementById('sidebar-content');
            
            var htmlContent = `<h2 class="location-header">${data.mainTitle}</h2>`;

            data.koleksiyon.forEach(function(item) {
                // YENİ TASARIM YAPISI
                htmlContent += `
                    <div class="tamga-card">
                        <h3 class="tamga-title">${item.baslik}</h3>
                        <img src="${item.resim}" class="tamga-img" alt="${item.baslik}">
                        
                        <div class="card-details">
                            <div class="detail-row">
                                <span class="label">TAHMİNİ ZAMAN:</span>
                                <span class="value">${item.donem}</span>
                            </div>
                            <div class="detail-row">
                                <span class="label">YER:</span>
                                <span class="value">${data.yerText}</span>
                            </div>
                            <div class="detail-row">
                                <span class="label">AÇIKLAMA:</span>
                                <span class="value">${item.aciklama}</span>
                            </div>
                        </div>
                    </div>
                `;
            });

            sidebarContent.innerHTML = htmlContent;
            sidebar.scrollTop = 0;
        });
    });

    // --- HEATMAP (DİNAMİK YOĞUNLUK) ---
    var heatPoints = [];
    
    locations.forEach(loc => {
        heatPoints.push([loc.coords[0], loc.coords[1], 1.0]);
        var tamgaSayisi = locationData[loc.id].koleksiyon.length;
        var carsipan = 25; 
        
        for(let i=0; i < (tamgaSayisi * carsipan); i++) {
            var spread = 18; 
            heatPoints.push([
                loc.coords[0] + (Math.random()-0.5)/spread, 
                loc.coords[1] + (Math.random()-0.5)/spread, 
                0.6 
            ]);
        }
    });

    L.heatLayer(heatPoints, { 
        radius: 30, 
        blur: 25, 
        gradient: {0.3: 'yellow', 0.6: 'orange', 1: 'red'} 
    }).addTo(map);

    </script>
</body>
</html>
